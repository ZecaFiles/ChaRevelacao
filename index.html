<!DOCTYPE html>

<html>
  <head>
    <title>Chá Revelação - Bru e Sid</title>
    <link rel="stylesheet" type="text/css" href="style/style.css" />
    <link rel="icon" type="image/x-icon"   href="/image/favicon.ico">
  </head>

  <body onload="Initialize()">

    <link rel="stylesheet" type="text/css" href="style/style.css" />
    <link rel="icon" type="image/x-icon"   href="/image/favicon.ico">

    <div class="container">
      
      <h1 id="headline">Contagem Regressiva</h1>

      <input type="hidden" id="sexo" />

      <div id="countdown">
        <ul>
          <li><span id="day"></span>days</li>
          <li><span id="hour"></span>Hours</li>
          <li><span id="minute"></span>Minutes</li>
          <li><span id="second"></span>Seconds</li>
        </ul>
      </div>
    </div>
    
    <script>

      function Initialize() {
        
        // configure parameter json
        // fetch('config/data_evento.json')
        //   .then(response => response.json())
        //   .then(response => {
            
        //     document.getElementById("day").value = response.DIA;
        //     document.getElementById("hour").value = response.HORA;
        //     document.getElementById("minute").value = response.MINUTO;
        //     document.getElementById("sexo").value = response.SEXO;
            
        //     Timer()
        //   })

        document.getElementById("day").value = 3;
        document.getElementById("hour").value = 22;
        document.getElementById("minute").value = 30;
        document.getElementById("sexo").value = "M";
        
        Timer()
      }

      function Timer() {

        // parametros de data
        var YY = 2022;
        var MM = 10;
        var SS = 0;
        
        // dia, hora e minutos que vem do arquivo data_evento.json
        var DD =  document.getElementById("day").value;
        var HH =  document.getElementById("hour").value;
        var MI =  document.getElementById("minute").value;

        // cria a data final
        var hoje = new Date();
        var futuro = new Date(YY,MM-1,DD,HH,MI,SS);
        
        // conversao em milesungos, segundos e horas
        var ms = parseInt((futuro - hoje)/1);
        var ss = parseInt(ms / 1000);
        var mm = parseInt(ss / 60);
        var hh = parseInt(mm / 60);
        var dd = parseInt(hh / 24);
            
        // converte unidades de data
        ms = ms - (ss * 1000);
        ss = ss - (mm * 60);
        mm = mm - (hh * 60);
        hh = hh - (dd * 24);

        // console.log(dd)
        // console.log(hh)
        // console.log(mm)
            
        // mensagem da contagem regressiva
        // var faltam = '';
        // faltam += (dd && dd > 1) ? dd+' dias, ' : (dd==1 ? '1 dia, ' : '');
        // if (hh > 0) {
        //   faltam += (toString(hh).length) ? hh+' horas, ' : '';
        // }         
        // faltam += (toString(mm).length) ? mm+' minutos e ' : '';
        // faltam += ss+' segundos';

        // se a data for maior que zero, mostra a contagem regressiva
        if (dd+hh+mm+ss > 0) {
          document.getElementById('day').innerHTML = (toString(dd).length) ? dd : '';
          document.getElementById('hour').innerHTML = (toString(hh).length) ? hh : '';
          document.getElementById('minute').innerHTML = (toString(mm).length) ? mm : '';
          document.getElementById('second').innerHTML = ss;

          // document.getElementById('timer').innerHTML = faltam;
                          
          setTimeout(Timer,1);
        }
        else{
          // fim da contagem regressiva - mostra a mensagem de revelação do sexo
          document.getElementById("revelation").style.display = 'block'
        }
      }

    </script>

  </body>

</html>
