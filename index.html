<!DOCTYPE html>
<html>
  <title>Chá Revelação - Bru & Sid</title>

  <body onload="Initialize()">
    <link rel="stylesheet" type="text/css" href="style/style.css" />
    <link rel="icon" type="image/x-icon" href="/image/favicon.png">

    <div class="content">
      
      </br>
      
      <div id="title">
        Aguardando...
      </div>

      </br>

      <div id="timer"></div>

      <div id="revelation" style="display:none">
        <h1>Parabéns</h1>
      </div>

      <!-- <div class="imagem">
        <img src="./image/zeca1.jpeg" width="170" height="170" />
        <img src="./image/zeca1.jpeg" width="170" height="170" />
        <img src="./image/zeca1.jpeg" width="170" height="170" />
        <img src="./image/zeca1.jpeg" width="170" height="170" />
      </div> -->

    </div>

    <input type="hidden" id="day" />
    <input type="hidden" id="hour" />
    <input type="hidden" id="minute" />
    <input type="hidden" id="sexo" />

    <div id="contador_dias"></div>
    <div id="contador_horas"></div>
    <div id="contador_minutos"></div>
    <div id="contador_segundos"></div>
    <div id="contador_milisegundos"></div>
    
    <script>

      function Initialize() {
        
        // configure parameter json
        debugger;
        fetch('config/data_evento.json')
          .then(response => response.json())
          .then(response => {
            
            console.log(response)
            document.getElementById("day").value = response.DIA;
            document.getElementById("hour").value = response.HORA;
            document.getElementById("minute").value = response.MINUTO;
            document.getElementById("sexo").value = response.SEXO;
            
            Timer(response.DIA, response.HORA, response.MINUTO)
          })
          .then(Timer())
      }

      function Timer(DD, HH, MI) {

        // parametros de data
        var YY = 2022;
        var MM = 10;
        var SS = 0;
        
        console.log(DD)
        console.log(HH)
        console.log(MI)
        
        // cria a data final
        var hoje = new Date();
        var futuro = new Date(YY,MM-1,DD,HH,MI,SS);
        
        var ms = parseInt((futuro - hoje)/1);
        var ss = parseInt(ms / 1000);
        var mm = parseInt(ss / 60);
        var hh = parseInt(mm / 60);
        var dd = parseInt(hh / 24);
            
        // converte unidades de data
        ms = ms - (ss * 1000);
        ss = ss - (mm * 60);
        mm = mm - (hh * 60);
        hh = hh - (dd * 24);

        console.log(dd)
        console.log(hh)
        console.log(mm)
            
        /*var faltam = '';
        faltam += (dd && dd > 1) ? dd+' dias, ' : (dd==1 ? '1 dia, ' : '');
        faltam += (toString(hh).length) ? hh+' hr, ' : '';
        faltam += (toString(mm).length) ? mm+' min e ' : '';
        faltam += ss+' seg';*/
                  
        if (dd+hh+mm+ss > 0) {
          document.getElementById('contador_dias').innerHTML = (toString(dd).length) ? dd+' dias' : '';
          document.getElementById('contador_horas').innerHTML = (toString(hh).length) ? hh+'h' : '';
          document.getElementById('contador_minutos').innerHTML = (toString(mm).length) ? mm+'m' : '';
          document.getElementById('contador_segundos').innerHTML = ss+'s';

          setTimeout(Timer,1);
        }
        else{
          document.getElementById("revelation").style.display = 'block'
        }
      }

      // function Timer () {


      //   if ((tempo - 1) >= -1) {

      //       // Pega a parte inteira dos minutos
      //       var min = parseInt(tempo / 60);

      //       // Calcula os segundos restantes
      //       var seg = tempo % 60;

      //       // Formata o número menor que dez, ex: 08, 07, ...
      //       if (min < 10) {
      //           min = "0" + min;
      //           min = min.substr(0, 2);
      //       }
      //       if (seg <= 9) {
      //           seg = "0" + seg;
      //       }

      //       // Cria a variável para formatar no estilo hora/cronômetro
      //       horaImprimivel = '00:' + min + ':' + seg;

      //       //set timer atualizado
      //       document.getElementById("timer").innerHTML = horaImprimivel;

      //       // Define que a função será executada novamente em 1000ms = 1 segundo
      //       setTimeout('Timer()', 1000);

      //       // diminui o tempo
      //       tempo--;

      //       console.log(tempo)
      //   }
      //   else
      //   {
      //       document.getElementById("revelation").style.display = 'block'
      //   }
      // }
    </script>
    
  </body>

</html>
